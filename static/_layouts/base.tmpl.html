{{define "base"}}
<!doctype html>
<html lang="{{.Lang}}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
    <link rel="stylesheet" href="/_assets/css/style.css" />
    <title>{{.Title}}</title>
    <!--<meta name="description" content="">-->
    <meta name="author" content="Manfred Touron">
    <link rel="apple-touch-icon" sizes="57x57" href="/_assets/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/_assets/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/_assets/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/_assets/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/_assets/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/_assets/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/_assets/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/_assets/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/_assets/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/_assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/_assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/_assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/_assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/_assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    {{if not .Opts.DevMode}}
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133664781-7"></script>
    <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-133664781-7');</script>
    {{end}}
  </head>
  <body>

    <header>
      <!-- FIXME: add search form -->
      {{if .JWTToken}}
      <div class="collapse bg-dark" id="navbarHeader">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-md-7 py-4">
              <h4 class="text-white">About</h4>
              <p class="text-muted">Lorem Ipsum.</p>
            </div>
            <div class="col-sm-4 offset-md-1 py-4">
              <h4 class="text-white">@{{.User.Slug}}</h4>
              <ul class="list-unstyled">
                <li><a href="/@{{.User.Slug}}" class="text-white">Profile</a></li>
                <li><a href="/settings" class="text-white">Settings</a></li>
                <li><a href="/logout" class="text-muted">Sign out</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      {{end}}
      <div class="navbar navbar-light bg-light shadow-sm">
        <div class="container d-flex justify-content-between">
          <a href="/" class="navbar-brand d-flex align-items-center">
            <svg width="2901" height="2901" viewBox="0 0 2901 2901" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 1450.5C0 2251.6 649.421 2901 1450.46 2901C2251.58 2901 2901 2251.6 2901 1450.5C2901 649.401 2251.58 0 1450.46 0C649.421 0 0 649.401 0 1450.5ZM1897.56 2063.62L883.294 1049.39L779.818 945.828L645.488 811.511L829.477 627.455L2081.62 1879.56C2132.4 1930.34 2132.4 2012.76 2081.62 2063.62C2056.19 2089.01 2022.89 2101.74 1989.59 2101.74C1956.3 2101.74 1922.99 2089.01 1897.56 2063.62ZM2032.52 1722.9L1133.84 824.246L1317.9 640.19L1529.04 851.318L2216.59 1538.84C2267.37 1589.7 2267.37 1672.12 2216.59 1722.9C2191.15 1748.29 2157.85 1761.02 2124.55 1761.02C2091.25 1761.02 2057.95 1748.29 2032.52 1722.9ZM2011.62 811.591L2127.04 696.256C2177.9 645.396 2260.24 645.396 2311.1 696.256C2361.88 747.036 2361.88 829.452 2311.1 880.312L1988.31 1203.01L1596.88 811.591C1654.15 868.866 1729.2 897.5 1804.25 897.5C1879.3 897.5 1954.35 868.866 2011.62 811.591ZM1629.88 2271.54L598.64 1240.33L782.701 1056.28L1099.4 1372.97L1813.85 2087.49C1864.72 2138.27 1864.72 2220.68 1813.85 2271.54C1788.47 2296.93 1755.17 2309.67 1721.87 2309.67C1688.57 2309.67 1655.27 2296.93 1629.88 2271.54ZM1319.03 2436.38L551.784 1669.16L735.845 1485.1L1503.09 2252.32C1553.95 2303.18 1553.95 2385.52 1503.09 2436.38C1477.7 2461.76 1444.39 2474.5 1411.09 2474.5C1377.78 2474.5 1344.45 2461.76 1319.03 2436.38Z" fill="#C83128"/></svg>
            <strong>SGTM</strong>{{if .Opts.DevMode}} (dev){{end}}
            <!-- FIXME: how it works link (when non-logged) -->
          </a>
          {{if .JWTToken}}
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
            <img class="avatar" src="{{.User.Avatar}}" />
            <!--<span class="navbar-toggler-icon"></span>-->
          </button>
          {{else}}
          <ul class="navbar-nav flex-row ml-md-auth d-none d-md-flex">
            <!-- FIXME: always available search form (icon -> click == expand) -->
            <li class="nav-item">
              <!-- FIXME: open login or popup (https://hackernoon.com/how-we-use-a-popup-for-google-and-outlook-oauth-5d8c03652171) -->
              <a class="btn btn-light" href="/login">Sign in</a>
            </li>
            <li class="nav-item ml-2">
              <!-- FIXME: open join modal -->
              <a class="btn btn-primary" href="/join">Join SGTM</a>
            </li>
          </ul>
          {{end}}
        </div>
      </div>
    </header>

    {{if .Error}}
    <section>
      <div class="container">
        <div class="row alert alert-danger" role="alert">
          {{.Error}}
        </div>
      </div>
    </section>
    {{end}}

    <main role="main">
      {{template "content" .}}
    </main>

    <footer class="page-footer text-muted bg-light">
      <div class="container">
        <p class="float-right">
          <a href="#">Back to top</a>
        </p>
        <p>Lorem Ipsum</p>
        <p>Lorem Ipsum</p>
        {{ if .Opts.DevMode }}
        <!-- FIXME: switch to button opening a modal -->
        <div>
          <p>
            <button class="btn" type="button" data-toggle="collapse" data-target="#devtools" aria-expanded="false" aria-controls="devtools">DevMode</button>
          </p>
          <div class="row">
            <div class="col">
              <div class="collapse" id="devtools">
                <div class="card card-body">
                  <div>All: <pre><code>{{. | toPrettyJson}}</code></pre></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        {{ end }}
      </div>
    </footer>

    <!-- FIXME: analytics -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" integrity="sha512-G3jAqT2eM4MMkLMyQR5YBhvN5/Da3IG6kqgYqU9zlIH4+2a+GuMdLb5Kpxy6ItMdCfgaKlo2XFhI0dHtMJjoRw==" crossorigin="anonymous"></script>
  </body>
</html>
{{end}}
